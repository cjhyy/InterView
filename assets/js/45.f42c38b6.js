(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{244:function(t,e,a){"use strict";a.r(e);var l=a(0),r=Object(l.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"http缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http缓存"}},[t._v("#")]),t._v(" HTTP缓存")]),t._v(" "),a("ans",[a("h4",{attrs:{id:"什么是-http-cache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-http-cache"}},[t._v("#")]),t._v(" 什么是 HTTP Cache")]),t._v(" "),a("ul",[a("li",[t._v("我们知道通过网络获取资源缓慢且耗时，需要三次握手等协议与远程服务器建立通信，对于大点的数据需要多次往返通信大大增加了时间开销，并且当今流量依旧没有理想的快速与便宜。对于开发者来说，长久缓存复用重复不变的资源是性能优化的重要组成部分。")]),t._v(" "),a("li",[t._v("HTTP 缓存机制就是，配置服务器响应头来告诉浏览器是否应该缓存资源、是否强制校验缓存、缓存多长时间；浏览器非首次请求根据响应头是否应该取缓存、缓存过期发送请求头验证缓存是否可用还是重新获取资源的过程。下面我们就来结合简单的 "),a("code",[t._v("node")]),t._v(" 服务器代码(文末)来介绍其中原理。")])]),t._v(" "),a("h4",{attrs:{id:"关键字"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关键字"}},[t._v("#")]),t._v(" 关键字")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("响应头")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("(常用)值")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cache-Control"),a("OutboundLink")],1)]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("no-cache, no-store, must-revalidate, max-age, public, private")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("控制浏览器是否可以缓存资源、强制缓存校验、缓存时间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/ETag",target:"_blank",rel:"noopener noreferrer"}},[t._v("ETag"),a("OutboundLink")],1)]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("文件指纹（hash码、时间戳等可以标识文件是否更新）")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("强校验，根据文件内容生成精确")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Last-Modified",target:"_blank",rel:"noopener noreferrer"}},[t._v("Last-Modified"),a("OutboundLink")],1)]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("请求的资源最近更新时间")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("弱校验， 根据文件修改时间，可能内容未变，不精确")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Expires",target:"_blank",rel:"noopener noreferrer"}},[t._v("Expires"),a("OutboundLink")],1)]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("资源缓存过期时间")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("与响应头中的 Date 对比")])])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("请求头")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("值")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-None-Match",target:"_blank",rel:"noopener noreferrer"}},[t._v("If-None-Match"),a("OutboundLink")],1)]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("缓存响应头中的 ETag 值")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("发送给服务器比对文件是否更新（精确）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-Modified-Since",target:"_blank",rel:"noopener noreferrer"}},[t._v("If-Modified-Since"),a("OutboundLink")],1)]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("缓存响应头中的 Last-Modified 值")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("发送给服务器比对文件是否更新（不精确）")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/2/17/17051e1477a1d12e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"这里写图片描述"}})])])],1)}),[],!1,null,null,null);e.default=r.exports}}]);