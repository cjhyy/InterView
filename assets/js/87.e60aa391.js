(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{288:function(e,s,t){"use strict";t.r(s);var a=t(0),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"vue底层实现原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue底层实现原理"}},[e._v("#")]),e._v(" Vue底层实现原理")]),e._v(" "),t("ans",[t("p",[e._v("vue.js是采用数据劫持结合发布者-订阅者模式的方式，通过Object.defineProperty()来"),t("em",[e._v("劫持各个属性的setter和getter")]),e._v("，在数据变动时发布消息给订阅者，触发相应的监听回调")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Vue是一个典型的MVVM框架，模型（Model）只是普通的javascript对象，修改它则试图（View）会自动更新。这种设计让状态管理变得非常简单而直观\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("Vue实现这种数据双向绑定的效果，需要三大模块:")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("1. Observer：能够对数据对象的所有属性进行监听，如有变动可拿到最新值并通知订阅者.\n2. Compile：对每个元素节点的指令进行扫描和解析，根据指令模板替换数据，以及绑定相应的更新函数。\n3. Watcher：链接Observer和Compile的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的相应的回调函数，从而更新试图。\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Observer（数据监听器）\n\t\tObserver的核心是通过Object.defineProprtty()来监听数据的变动，这个函数内部可以定义setter和getter，每当数据发生变化，就会触发setter。这时候Observer就要通知订阅者，订阅者就是Watcher\nWatcher（订阅者）\n\t\tWatcher订阅者作为Observer和Compile之间通信的桥梁，主要做的事情是：\n\t\t\t1.在自身实例化时往属性订阅器(dep)里面添加自己\n\t\t\t2.自身必须有一个update()方法\n\t\t\t3.待属性变动dep.notice()通知时，能调用自身的update()方法，并触发Compile中绑定的回调\nCompile（指令解析器）\n\t\tCompile主要做的事情是解析模板指令，将模板中变量替换成数据，然后初始化渲染页面视图，并将每个指令对应的节点绑定更新函数，添加鉴定数据的订阅者，一旦数据有变动，收到通知，更新试图\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br")])])])],1)}),[],!1,null,null,null);s.default=n.exports}}]);